{{- define "main" }}
<main>
    <article class="h-entry {{ range $index, $category := .Params.categories }}{{ if gt $index 0 }} {{ end }}{{ $category | lower | urlize }}{{ end }}">
        {{- if .Title }}
        <h1 class="post-title">{{ .Title | safeHTML }}</h1>
        <p class="post-date">
            <time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">
                {{ .Date | time.Format ":date_full" }}
            </time>
        </p>
        {{- else }}
        <p class="post-date btm-margin">
            <time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">
                {{ .Date | time.Format ":date_full" }}
            </time>
        </p>
        {{- end }}
        {{- with .Params.audio }}
        <script type="text/javascript" src="https://micro.blog/narration.js?url={{ . }}"></script>
        {{- end }}
        <div class="e-content">
            {{ .Content }}
        </div>
    </article>
    {{- if or (.NextInSection) (.PrevInSection) }}
    <nav class="main-nav">
        <ul>
            <li class="older">{{ if .PrevInSection }}<h4>Older</h4><a href="{{ .PrevInSection.Permalink }}">← {{ or .PrevInSection.Title "Previous" }}</a>{{ end }}</li>
            <li class="newer">{{ if .NextInSection }}<h4>Newer</h4><a href="{{ .NextInSection.Permalink }}">{{ or .NextInSection.Title "Next" }} →</a>{{ end }}</li>
        </ul>
    </nav>
    {{- end }}
</main>
{{- end }}